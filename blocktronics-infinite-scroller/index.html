<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="user-scalable=no, width=320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" href="blocktronics-logo.png"/>
    <meta id="viewport" name="viewport" content="">
<script>
(function () {
    "use strict";
    if (navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i)) {
        document.getElementById("viewport").setAttribute("content", "width=640; user-scalable=no");
    } else if (navigator.userAgent.match(/iPad/i)) {
        document.getElementById("viewport").setAttribute("content", "width=768; user-scalable=no");
    }
}());
</script> 
    <title>Blocktronics Infinite Scroller</title>
    <script src="../ansilove.js" type="text/javascript" charset="utf-8"></script>
    <style type="text/css" media="screen">
    body {
        background: black;
        margin: 0;
        overflow: hidden;
    }
    #ansi {
        width: 640px;
        margin: 0 auto;
    }
    #ansi canvas {
        image-rendering: optimize-contrast;
        image-rendering: -webkit-optimize-contrast;
        image-rendering: -moz-crisp-edges;
    }
    </style>
</head>
    <body>
        <div id="ansi"></div>
        
<script type="text/javascript">
(function init() {
    "use strict";
    function httpGetList(url, callback, callbackFail) {
        var http;
        http = new XMLHttpRequest();
        http.open("GET", url, true);
        http.onreadystatechange = function () {
            if (http.readyState === 4) {
                switch (http.status) {
                case 0:
                case 200:
                    callback(http.response.split("\n").filter(function (text) { return text !== ""; }));
                    break;
                default:
                    if (callbackFail) {
                        callbackFail(http.status);
                    } else {
                        throw ("Could not retrieve: " + url);
                    }
                }
            }
        };
        http.responseType = "text";
        http.send();
    }

    httpGetList("file_list.txt", function (ANS) {
        (function loadAns() {
            var controller;

            function randomAns() {
                return encodeURIComponent(ANS[Math.floor(Math.random() * ANS.length)]);
            }

            controller = AnsiLove.animate(randomAns(), function (canvas) {
                document.getElementById("ansi").appendChild(canvas);
                (function start() {
                    controller.play(14400, function () {
                        (function reload() {
                            controller.load(randomAns(), function () {
                                setTimeout(start, 3000);
                            }, reload);
                        }());
                    }, false);
                }());
            }, {"2J": 0, "rows": Math.ceil(window.innerHeight / 16)}, function () {
                setTimeout(loadAns, 3000);
            });
        }());
    }, function () {
        setTimeout(init, 3000);
    });
}());
</script>
        
    </body>
</html>